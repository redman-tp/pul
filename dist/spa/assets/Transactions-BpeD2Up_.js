import{_ as T,G as R,N as g,I as a,L as o,J as n,K as r,t as v,T as m,B as c,W as d,H as b,S as f,aC as h,a7 as C,a0 as B,a6 as V,n as y,Q as F,aj as N,a1 as S,r as E}from"./index-B0iSiuEa.js";import{Q as w}from"./QTooltip-CiG7XDpu.js";import{Q as L}from"./QTd-pFYt8EDs.js";import{T as U,Q as I,e as D}from"./TPagination-gtQN2vqc.js";import{Q as k}from"./QMenu-DeCSquD-.js";import{Q as M}from"./QForm-CVwwJjEb.js";import{C as q}from"./ClosePopup-CMAJ_Ip8.js";import{u as j}from"./use-meta-BaTCs18N.js";import"./rtl-DFPa-2ov.js";import"./format-hlGAdIUH.js";import"./selection-NvJEFU-3.js";import"./QList-B86bEfPj.js";import"./use-fullscreen-tRaayeB4.js";const z=[{name:"id",required:!0,label:"ID",align:"left",field:"id",sortable:!0},{name:"company",required:!0,label:"Company",align:"left",field:t=>t.user.fullname,sortable:!0},{name:"amount",required:!0,label:"Amount",align:"left",field:"amount",sortable:!0},{name:"email",required:!0,label:"Email",align:"left",field:t=>t.user.email,sortable:!0},{name:"phone",required:!0,label:"Phone",align:"left",field:t=>t.user.phone,sortable:!0},{name:"date",required:!0,label:"Date",align:"left",field:"date",sortable:!0},{name:"actions",required:!0,label:"Actions",align:"left",field:t=>t.id,sortable:!1}];function x(t,l){let s=l!==void 0?l(t):t;return s=s==null?"":String(s),s=s.split('"').join('""'),`"${s}"`}const A={setup(){j({title:"Reservations"})},components:{TPagination:U},data(){const t=E({sortBy:"desc",descending:!1,page:1,rowsPerPage:8});return{columns:z,selected:[],category:null,categories:[],rows:[],errors:[],image:null,pagination:t,filter:"",curl:"",separator:"",mode:"list",role:"fruitbay",items:[],meta:{},links:{},currentPage:1,data:{},loading:!1,editstate:!1,editReserve:!1,editLoad:!1,reserveid:"",spaceid:"",initialPagination:{rowsPerPage:30,pagesNumber:1},loaders:{delete:!1,category:!1,deleteBtn:[],save:[]}}},computed:{pagesNumber(){return Math.ceil(this.rows.length/this.pagination.rowsPerPage)}},mounted(){this.onRequest({pagination:this.pagination,filter:void 0})},methods:{onRequest(t){this.loading=!0;const l="admin/transactions";this.curl=l,this.$api.get(l).then(s=>{console.log(s),this.loading=!1,this.rows=s.data.data,this.items=s.data.data,this.links=s.data.links,this.meta=s.data.meta}).catch(({response:s})=>{console.log(s),this.loading=!1,this.rows=[]})},refreshPage(){this.curl!==""&&(this.loading=!0,this.$api.get(this.curl).then(({data:t})=>{this.loading=!1,this.items=t.data,console.log(t)}).catch(({response:t})=>{console.log(t),this.loading=!1,this.rows=[]}))},exportTable(){const t=[this.columns.map(s=>x(s.label))].concat(this.rows.map(s=>this.columns.map(u=>x(typeof u.field=="function"?u.field(s):s[u.field===void 0?u.name:u.field],u.format)).join(","))).join(`\r
`);D("fruitbay-management.csv",t,"text/csv")!==!0&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}},G={class:"q-pt-xl"},W={class:"full-width row flex-center text-negative q-gutter-sm"},H={key:0,class:"text-h6"},J={key:1,class:"text-h6"},K={class:"row q-gutter-sm"},O={class:"col"},X={key:0,class:"error"},Y={class:"col"},Z={key:0,class:"error"},$={class:"row q-gutter-sm"},ee={class:"col"},le={key:0,class:"error"};function te(t,l,s,u,e,_){const Q=R("t-pagination");return a(),g("div",G,[o(I,{title:"Spaces",class:"q-pt-xl",rows:e.items,"hide-header":e.mode==="grid",columns:e.columns,"row-key":"id",grid:e.mode=="grid",filter:e.filter,loading:e.loading,selection:"multiple",selected:e.selected,"onUpdate:selected":l[2]||(l[2]=i=>e.selected=i),pagination:e.initialPagination,onRequest:_.onRequest},{"top-right":n(i=>[o(h,{outlined:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[0]||(l[0]=p=>e.filter=p),placeholder:"Search"},{append:n(()=>[o(v,{name:"search"})]),_:1},8,["modelValue"]),e.mode==="list"?(a(),b(c,{key:0,flat:"",round:"",dense:"",icon:i.inFullscreen?"fullscreen_exit":"fullscreen",onClick:i.toggleFullscreen},{default:n(()=>[o(w,{disable:t.$q.platform.is.mobile},{default:n(()=>[d(m(i.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])]),_:2},1032,["icon","onClick"])):f("",!0),i.inFullscreen?f("",!0):(a(),b(c,{key:1,flat:"",round:"",dense:"",icon:e.mode==="grid"?"list":"grid_on",onClick:l[1]||(l[1]=p=>{e.mode=e.mode==="grid"?"list":"grid",e.separator=e.mode==="grid"?"none":"horizontal"})},{default:n(()=>[o(w,{disable:t.$q.platform.is.mobile},{default:n(()=>[d(m(e.mode==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])]),_:1},8,["icon"])),e.rows.length?(a(),b(c,{key:2,color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",padding:"xs",onClick:_.exportTable},null,8,["onClick"])):f("",!0)]),"body-cell-actions":n(i=>[o(L,{props:i},{default:n(()=>[r("div",null,[o(c,{round:"",dense:"",glossy:"",color:"info",size:"sm",class:"q-ml-sm",icon:"edit",loading:e.loaders.save[i.value],onClick:p=>t.EditReservation(i.row)},{default:n(()=>[o(w,null,{default:n(()=>[d("Edit "+m(i.row.name),1)]),_:2},1024)]),_:2},1032,["loading","onClick"])])]),_:2},1032,["props"])]),"no-data":n(({icon:i,message:p,filter:P})=>[r("div",W,[o(v,{size:"2em",name:"sentiment_dissatisfied"}),r("span",null," Well this is sad... "+m(p),1),o(v,{size:"2em",name:P?"filter_b_and_w":i},null,8,["name"])])]),_:1},8,["rows","hide-header","columns","grid","filter","loading","selected","pagination","onRequest"]),o(C,{align:"center"},{default:n(()=>[o(Q,{links:e.links,meta:e.meta,container:"#contentContainer",modelValue:e.currentPage,"onUpdate:modelValue":l[3]||(l[3]=i=>e.currentPage=i),onLoading:l[4]||(l[4]=i=>t.loadingMore=!0),onLoaded:l[5]||(l[5]=i=>(e.items=i,t.loadingMore=!1))},null,8,["links","meta","modelValue"])]),_:1}),o(S,{modelValue:e.editReserve,"onUpdate:modelValue":l[9]||(l[9]=i=>e.editReserve=i)},{default:n(()=>[o(B,{style:{width:"800px","max-width":"85vw"}},{default:n(()=>[o(V,null,{default:n(()=>[e.editstate?(a(),g("div",J,[l[11]||(l[11]=d(" Confirm reservation ")),y(o(c,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[q]])])):(a(),g("div",H,[l[10]||(l[10]=d(" Add spaces ")),y(o(c,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[q]])]))]),_:1}),o(F,{inset:""}),o(V,{class:"q-pt-none"},{default:n(()=>[o(M,{onSubmit:N(t.editedFunction,["prevent"]),class:"q-gutter-md"},{default:n(()=>[r("div",K,[r("div",O,[o(k,{class:"q-pb-xs"},{default:n(()=>l[12]||(l[12]=[d("Name")])),_:1}),o(h,{dense:"",outlined:"",name:"name",modelValue:e.data.name,"onUpdate:modelValue":l[6]||(l[6]=i=>e.data.name=i),label:"Name"},null,8,["modelValue"]),e.errors.name?(a(),g("div",X,m(e.errors.name[0]),1)):f("",!0)]),r("div",Y,[o(k,{class:"q-pb-xs"},{default:n(()=>l[13]||(l[13]=[d("Company")])),_:1}),o(h,{dense:"",outlined:"",name:"company",type:"text",modelValue:e.data.company,"onUpdate:modelValue":l[7]||(l[7]=i=>e.data.company=i),label:"Company"},null,8,["modelValue"]),e.errors.company?(a(),g("div",Z,m(e.errors.company[0]),1)):f("",!0)])]),r("div",$,[r("div",ee,[o(k,{class:"q-pb-xs"},{default:n(()=>l[14]||(l[14]=[d("Email")])),_:1}),o(h,{dense:"",outlined:"",name:"email",modelValue:e.data.email,"onUpdate:modelValue":l[8]||(l[8]=i=>e.data.email=i),label:"Email"},null,8,["modelValue"]),e.errors.email?(a(),g("div",le,m(e.errors.email[0]),1)):f("",!0)])]),o(C,{align:"right",class:"text-teal"},{default:n(()=>[e.editstate?y((a(),b(c,{key:0,label:"Paid",type:"submit",color:"primary",onClick:t.editedFunction,loading:e.editLoad},null,8,["onClick","loading"])),[[q,!1]]):f("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const be=T(A,[["render",te],["__scopeId","data-v-5cb389b4"]]);export{be as default};
