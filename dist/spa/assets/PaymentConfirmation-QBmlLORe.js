import{c as x,a as b,g as w,f as k,j as y,l as r,p as l,_ as B,N as g,I as i,K as o,H as _,S as u,J as m,M as q,W as C,T as f,L as d,t as v,B as S,a0 as M}from"./index-B0iSiuEa.js";import{Q}from"./QSpinnerPuff-ZK5Kvy73.js";import{u as $}from"./use-meta-BaTCs18N.js";const N=x({name:"QBanner",props:{...b,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:a}){const{proxy:{$q:s}}=w(),n=k(t,s),e=y(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(n.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),h=y(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const p=[r("div",{class:"q-banner__avatar col-auto row items-center self-start"},l(a.avatar)),r("div",{class:"q-banner__content col text-body2"},l(a.default))],c=l(a.action);return c!==void 0&&p.push(r("div",{class:h.value},c)),r("div",{class:e.value+(t.inlineActions===!1&&c!==void 0?" q-banner--top-padding":""),role:"alert"},p)}}}),P={name:"PaymentConfirmation",setup(){$({title:"Payment Confirmation"})},data(){return{successRoute:{route:{name:"user.transactions"},label:"View Transactions"},loading:!1,value:0,paymentMessage:"Request Failed",status_info:null,paymentStatus:"info",icon:{success:"fa-check",error:"fa-times",info:"fa-info"},classes:{success:"tf-green-10",error:"tf-red-10",info:"tf-blue-10"},classes2:{success:"bg-positive",error:"bg-negative",info:"bg-info"}}},created(){this.$q.loading.show({spinner:Q}),this.loading=!0;const t=this.$route.query.reference||this.$route.params.ref;console.log(this.$route);const a=`?trxref=${t}&reference=${t}`;this.$api.get(`/payment/paystack/verify${a}`).then(({data:s})=>{this.loading=!1,this.$q.loading.hide(),this.paymentMessage=s.status_info?null:s.message,this.paymentStatus=s.status,this.status_info=s.status_info||null,s.data.type==="company"?this.successRoute={route:{name:"account.companies",params:{id:s.data.company.id}},label:"Goto my companies"}:(s.data.type==="service"||s.data.type==="inventory")&&(this.$store.user.emptyCart(!0),this.successRoute={route:{name:"user.transactions"},label:"Goto my transactions"})}).catch(s=>{this.loading=!1,this.$q.loading.hide();let n=this.$plugins.reader.error(s);this.paymentMessage=n.message||n,this.$helper.notify(n.message||n,n.status||"error")})}},V={class:"main"},D={class:"row q-mr-none q-mx-md-lg q-my-md q-py-xl"},I={class:"col-12 col-md-12 q-pl-md-md"},R={key:1,class:"items-center text-center column"},j={class:"text-h4 tf-max-w-600 q-my-lg text-grey-9 tf-font-anton"},A={class:"text-h6 tf-max-w-600 text-grey-7 q-mb-sm tf-font-hero"};function G(t,a,s,n,e,h){return i(),g("main",V,[o("div",D,[o("div",I,[e.loading?u("",!0):(i(),_(M,{key:0,flat:"",class:"tf-rounded-5 q-pa-xl"},{default:m(()=>[e.paymentMessage&&!e.loading?(i(),_(N,{key:0,dense:"",rounded:"",class:q(["text-white",e.classes2[e.paymentStatus]])},{avatar:m(()=>[d(v,{name:"info",color:"white"})]),default:m(()=>[C(" "+f(e.paymentMessage),1)]),_:1},8,["class"])):u("",!0),e.status_info?(i(),g("div",R,[o("div",{class:q(["flex items-center justify-center tf-w-100 tf-h-100 tf-rounded-full q-mb-md",e.classes[e.paymentStatus]])},[d(v,{name:`fa-solid ${e.icon[e.paymentStatus]||e.icon.error}`,color:"white",size:"4rem"},null,8,["name"])],2),o("h4",j,f(e.status_info.message),1),o("h6",A,f(e.status_info.info),1),d(S,{to:"/greyacademy",class:"q-mt-md",color:"green","icon-right":"fa-solid fa-arrow-right","no-caps":"",label:"Go Home"})])):u("",!0)]),_:1}))])])])}const E=B(P,[["render",G],["__scopeId","data-v-e1df83dd"]]);export{E as default};
