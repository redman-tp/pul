import{c as He,bi as Ct,bj as Xe,bk as Vt,bl as kt,aH as jt,a as Nt,g as Pe,f as $t,aI as Kt,j as v,as as Qt,a9 as Wt,l as y,t as Fe,bm as Ut,x as oe,z as Xt,r as E,w as ae,ar as ue,bn as Yt,aG as Gt,ag as Zt,ah as Jt,o as Be,bo as el,bp as tl,bq as ct,br as ll,ac as Ae,ab as nl,az as $e,bs as ul,al as ol,aA as Ce,aa as al,a1 as il,q as rl,m as sl,C as cl,u as dl,b0 as Ke,aD as fl,b as vl,ae as ml,af as Sl,b1 as hl,i as gl,b2 as yl,au as dt,ax as ft,aE as bl,Z as wl,p as Cl}from"./index-B0iSiuEa.js";import{a as Vl,Q as kl,v as pl,b as vt,u as xl,p as mt,c as ql,d as Al,e as Ol,r as St,s as Tl}from"./QMenu-DeCSquD-.js";import{r as Ue}from"./rtl-DFPa-2ov.js";import{n as ht}from"./format-hlGAdIUH.js";import{c as gt}from"./selection-NvJEFU-3.js";const zl=He({name:"QField",inheritAttrs:!1,props:{...Xe,tag:{type:String,default:"label"}},emits:Ct,setup(){return Vt(kt({tagProp:!0}))}}),Il={xs:8,sm:10,md:14,lg:20,xl:24},Ml=He({name:"QChip",props:{...Nt,...jt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:s,emit:i}){const{proxy:{$q:m}}=Pe(),A=$t(e,m),a=Kt(e,Il),I=v(()=>e.selected===!0||e.icon!==void 0),d=v(()=>e.selected===!0?e.iconSelected||m.iconSet.chip.selected:e.icon),S=v(()=>e.iconRemove||m.iconSet.chip.remove),O=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=v(()=>{const f=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(f?` text-${f} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(O.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(A.value===!0?" q-chip--dark q-dark":"")}),C=v(()=>{const f=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},D={...f,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||m.lang.label.remove};return{chip:f,remove:D}});function V(f){f.keyCode===13&&k(f)}function k(f){e.disable||(i("update:selected",!e.selected),i("click",f))}function z(f){(f.keyCode===void 0||f.keyCode===13)&&(oe(f),e.disable===!1&&(i("update:modelValue",!1),i("remove")))}function B(){const f=[];O.value===!0&&f.push(y("div",{class:"q-focus-helper"})),I.value===!0&&f.push(y(Fe,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const D=e.label!==void 0?[y("div",{class:"ellipsis"},[e.label])]:void 0;return f.push(y("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ut(s.default,D))),e.iconRight&&f.push(y(Fe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&f.push(y(Fe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:S.value,...C.value.remove,onClick:z,onKeyup:z})),f}return()=>{if(e.modelValue===!1)return;const f={class:c.value,style:a.value};return O.value===!0&&Object.assign(f,C.value.chip,{onClick:k,onKeyup:V}),Qt("div",f,B(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Wt,e.ripple]])}}}),U=1e3,_l=["start","center","end","start-force","center-force","end-force"],pt=Array.prototype.filter,El=window.getComputedStyle(document.body).overflowAnchor===void 0?Xt:function(e,s){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const i=e.children||[];pt.call(i,A=>A.dataset&&A.dataset.qVsAnchor!==void 0).forEach(A=>{delete A.dataset.qVsAnchor});const m=i[s];m?.dataset&&(m.dataset.qVsAnchor="")}))};function Ve(e,s){return e+s}function Qe(e,s,i,m,A,a,I,d){const S=e===window?document.scrollingElement||document.documentElement:e,O=A===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-I-d,scrollMaxSize:0,offsetStart:-I,offsetEnd:-d};if(A===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=S.scrollLeft,c.scrollViewSize+=S.clientWidth),c.scrollMaxSize=S.scrollWidth,a===!0&&(c.scrollStart=(Ue===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=S.scrollTop,c.scrollViewSize+=S.clientHeight),c.scrollMaxSize=S.scrollHeight),i!==null)for(let C=i.previousElementSibling;C!==null;C=C.previousElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=C[O]);if(m!==null)for(let C=m.nextElementSibling;C!==null;C=C.nextElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=C[O]);if(s!==e){const C=S.getBoundingClientRect(),V=s.getBoundingClientRect();A===!0?(c.offsetStart+=V.left-C.left,c.offsetEnd-=V.width):(c.offsetStart+=V.top-C.top,c.offsetEnd-=V.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function yt(e,s,i,m){s==="end"&&(s=(e===window?document.body:e)[i===!0?"scrollWidth":"scrollHeight"]),e===window?i===!0?(m===!0&&(s=(Ue===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-s),window.scrollTo(s,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s):i===!0?(m===!0&&(s=(Ue===!0?e.scrollWidth-e.offsetWidth:0)-s),e.scrollLeft=s):e.scrollTop=s}function Oe(e,s,i,m){if(i>=m)return 0;const A=s.length,a=Math.floor(i/U),I=Math.floor((m-1)/U)+1;let d=e.slice(a,I).reduce(Ve,0);return i%U!==0&&(d-=s.slice(a*U,i).reduce(Ve,0)),m%U!==0&&m!==A&&(d-=s.slice(m,I*U).reduce(Ve,0)),d}const xt={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Nl=Object.keys(xt),bt={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...xt};function Fl({virtualScrollLength:e,getVirtualScrollTarget:s,getVirtualScrollEl:i,virtualScrollItemSizeComputed:m}){const A=Pe(),{props:a,emit:I,proxy:d}=A,{$q:S}=d;let O,c,C,V=[],k;const z=E(0),B=E(0),f=E({}),D=E(null),W=E(null),L=E(null),M=E({from:0,to:0}),N=v(()=>a.tableColspan!==void 0?a.tableColspan:100);m===void 0&&(m=v(()=>a.virtualScrollItemSize));const H=v(()=>m.value+";"+a.virtualScrollHorizontal),$=v(()=>H.value+";"+a.virtualScrollSliceRatioBefore+";"+a.virtualScrollSliceRatioAfter);ae($,()=>{R()}),ae(H,G);function G(){J(c,!0)}function Z(l){J(l===void 0?c:l)}function X(l,n){const r=s();if(r==null||r.nodeType===8)return;const p=Qe(r,i(),D.value,W.value,a.virtualScrollHorizontal,S.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd);C!==p.scrollViewSize&&R(p.scrollViewSize),j(r,p,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,_l.indexOf(n)!==-1?n:c!==-1&&l>c?"end":"start")}function ie(){const l=s();if(l==null||l.nodeType===8)return;const n=Qe(l,i(),D.value,W.value,a.virtualScrollHorizontal,S.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd),r=e.value-1,p=n.scrollMaxSize-n.offsetStart-n.offsetEnd-B.value;if(O===n.scrollStart)return;if(n.scrollMaxSize<=0){j(l,n,0,0);return}C!==n.scrollViewSize&&R(n.scrollViewSize),re(M.value.from);const x=Math.floor(n.scrollMaxSize-Math.max(n.scrollViewSize,n.offsetEnd)-Math.min(k[r],n.scrollViewSize/2));if(x>0&&Math.ceil(n.scrollStart)>=x){j(l,n,r,n.scrollMaxSize-n.offsetEnd-V.reduce(Ve,0));return}let b=0,w=n.scrollStart-n.offsetStart,F=w;if(w<=p&&w+n.scrollViewSize>=z.value)w-=z.value,b=M.value.from,F=w;else for(let g=0;w>=V[g]&&b<r;g++)w-=V[g],b+=U;for(;w>0&&b<r;)w-=k[b],w>-n.scrollViewSize?(b++,F=w):F=k[b]+w;j(l,n,b,F)}function j(l,n,r,p,x){const b=typeof x=="string"&&x.indexOf("-force")!==-1,w=b===!0?x.replace("-force",""):x,F=w!==void 0?w:"start";let g=Math.max(0,r-f.value[F]),K=g+f.value.total;K>e.value&&(K=e.value,g=Math.max(0,K-f.value.total)),O=n.scrollStart;const ne=g!==M.value.from||K!==M.value.to;if(ne===!1&&w===void 0){se(r);return}const{activeElement:Te}=document,ee=L.value;ne===!0&&ee!==null&&ee!==Te&&ee.contains(Te)===!0&&(ee.addEventListener("focusout",me),setTimeout(()=>{ee?.removeEventListener("focusout",me)})),El(ee,r-g);const ze=w!==void 0?k.slice(g,r).reduce(Ve,0):0;if(ne===!0){const ce=K>=M.value.from&&g<=M.value.to?M.value.to:K;M.value={from:g,to:ce},z.value=Oe(V,k,0,g),B.value=Oe(V,k,K,e.value),requestAnimationFrame(()=>{M.value.to!==K&&O===n.scrollStart&&(M.value={from:M.value.from,to:K},B.value=Oe(V,k,K,e.value))})}requestAnimationFrame(()=>{if(O!==n.scrollStart)return;ne===!0&&re(g);const ce=k.slice(g,r).reduce(Ve,0),de=ce+n.offsetStart+z.value,Ie=de+k[r];let pe=de+p;if(w!==void 0){const Re=ce-ze,xe=n.scrollStart+Re;pe=b!==!0&&xe<de&&Ie<xe+n.scrollViewSize?xe:w==="end"?Ie-n.scrollViewSize:de-(w==="start"?0:Math.round((n.scrollViewSize-k[r])/2))}O=pe,yt(l,pe,a.virtualScrollHorizontal,S.lang.rtl),se(r)})}function re(l){const n=L.value;if(n){const r=pt.call(n.children,g=>g.classList&&g.classList.contains("q-virtual-scroll--skip")===!1),p=r.length,x=a.virtualScrollHorizontal===!0?g=>g.getBoundingClientRect().width:g=>g.offsetHeight;let b=l,w,F;for(let g=0;g<p;){for(w=x(r[g]),g++;g<p&&r[g].classList.contains("q-virtual-scroll--with-prev")===!0;)w+=x(r[g]),g++;F=w-k[b],F!==0&&(k[b]+=F,V[Math.floor(b/U)]+=F),b++}}}function me(){L.value?.focus()}function J(l,n){const r=1*m.value;(n===!0||Array.isArray(k)===!1)&&(k=[]);const p=k.length;k.length=e.value;for(let b=e.value-1;b>=p;b--)k[b]=r;const x=Math.floor((e.value-1)/U);V=[];for(let b=0;b<=x;b++){let w=0;const F=Math.min((b+1)*U,e.value);for(let g=b*U;g<F;g++)w+=k[g];V.push(w)}c=-1,O=void 0,z.value=Oe(V,k,0,M.value.from),B.value=Oe(V,k,M.value.to,e.value),l>=0?(re(M.value.from),ue(()=>{X(l)})):te()}function R(l){if(l===void 0&&typeof window<"u"){const w=s();w!=null&&w.nodeType!==8&&(l=Qe(w,i(),D.value,W.value,a.virtualScrollHorizontal,S.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd).scrollViewSize)}C=l;const n=parseFloat(a.virtualScrollSliceRatioBefore)||0,r=parseFloat(a.virtualScrollSliceRatioAfter)||0,p=1+n+r,x=l===void 0||l<=0?1:Math.ceil(l/m.value),b=Math.max(1,x,Math.ceil((a.virtualScrollSliceSize>0?a.virtualScrollSliceSize:10)/p));f.value={total:Math.ceil(b*p),start:Math.ceil(b*n),center:Math.ceil(b*(.5+n)),end:Math.ceil(b*(1+n)),view:x}}function ke(l,n){const r=a.virtualScrollHorizontal===!0?"width":"height",p={["--q-virtual-scroll-item-"+r]:m.value+"px"};return[l==="tbody"?y(l,{class:"q-virtual-scroll__padding",key:"before",ref:D},[y("tr",[y("td",{style:{[r]:`${z.value}px`,...p},colspan:N.value})])]):y(l,{class:"q-virtual-scroll__padding",key:"before",ref:D,style:{[r]:`${z.value}px`,...p}}),y(l,{class:"q-virtual-scroll__content",key:"content",ref:L,tabindex:-1},n.flat()),l==="tbody"?y(l,{class:"q-virtual-scroll__padding",key:"after",ref:W},[y("tr",[y("td",{style:{[r]:`${B.value}px`,...p},colspan:N.value})])]):y(l,{class:"q-virtual-scroll__padding",key:"after",ref:W,style:{[r]:`${B.value}px`,...p}})]}function se(l){c!==l&&(a.onVirtualScroll!==void 0&&I("virtualScroll",{index:l,from:M.value.from,to:M.value.to-1,direction:l<c?"decrease":"increase",ref:d}),c=l)}R();const te=Yt(ie,S.platform.is.ios===!0?120:35);Gt(()=>{R()});let le=!1;return Zt(()=>{le=!0}),Jt(()=>{if(le!==!0)return;const l=s();O!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?yt(l,O,a.virtualScrollHorizontal,S.lang.rtl):X(c)}),Be(()=>{te.cancel()}),Object.assign(d,{scrollTo:X,reset:G,refresh:Z}),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:f,setVirtualScrollSize:R,onVirtualScrollEvt:te,localResetVirtualScroll:J,padVirtualScroll:ke,scrollTo:X,reset:G,refresh:Z}}const wt=e=>["add","add-unique","toggle"].includes(e),Bl=".*+?^${}()|[]\\",Hl=Object.keys(Xe);function We(e,s){if(typeof e=="function")return e;const i=e!==void 0?e:s;return m=>m!==null&&typeof m=="object"&&i in m?m[i]:m}const $l=He({name:"QSelect",inheritAttrs:!1,props:{...bt,...el,...Xe,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:wt},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:bt.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Ct,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:s,emit:i}){const{proxy:m}=Pe(),{$q:A}=m,a=E(!1),I=E(!1),d=E(-1),S=E(""),O=E(!1),c=E(!1);let C=null,V=null,k,z,B,f=null,D,W,L,M;const N=E(null),H=E(null),$=E(null),G=E(null),Z=E(null),X=tl(e),ie=ll(ot),j=v(()=>Array.isArray(e.options)?e.options.length:0),re=v(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:me,virtualScrollSliceSizeComputed:J,localResetVirtualScroll:R,padVirtualScroll:ke,onVirtualScrollEvt:se,scrollTo:te,setVirtualScrollSize:le}=Fl({virtualScrollLength:j,getVirtualScrollTarget:Tt,getVirtualScrollEl:nt,virtualScrollItemSizeComputed:re}),l=kt(),n=v(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,u=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const o=e.mapOptions===!0&&k!==void 0?k:[],h=u.map(T=>Ot(T,o));return e.modelValue===null&&t===!0?h.filter(T=>T!==null):h}return u}),r=v(()=>{const t={};return Hl.forEach(u=>{const o=e[u];o!==void 0&&(t[u]=o)}),t}),p=v(()=>e.optionsDark===null?l.isDark.value:e.optionsDark),x=v(()=>ct(n.value)),b=v(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||n.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),w=v(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),F=v(()=>j.value===0),g=v(()=>n.value.map(t=>Q.value(t)).join(", ")),K=v(()=>e.displayValue!==void 0?e.displayValue:g.value),ne=v(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),Te=v(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||n.value.some(ne.value))),ee=v(()=>l.focused.value===!0?e.tabindex:-1),ze=v(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":a.value===!0?"true":"false","aria-controls":`${l.targetUid.value}_lb`};return d.value>=0&&(t["aria-activedescendant"]=`${l.targetUid.value}_${d.value}`),t}),ce=v(()=>({id:`${l.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),de=v(()=>n.value.map((t,u)=>({index:u,opt:t,html:ne.value(t),selected:!0,removeAtIndex:At,toggleOption:fe,tabindex:ee.value}))),Ie=v(()=>{if(j.value===0)return[];const{from:t,to:u}=me.value;return e.options.slice(t,u).map((o,h)=>{const T=Se.value(o)===!0,q=Le(o)===!0,P=t+h,_={clickable:!0,active:q,activeClass:xe.value,manualFocus:!0,focused:!1,disable:T,tabindex:-1,dense:e.optionsDense,dark:p.value,role:"option","aria-selected":q===!0?"true":"false",id:`${l.targetUid.value}_${P}`,onClick:()=>{fe(o)}};return T!==!0&&(d.value===P&&(_.focused=!0),A.platform.is.desktop===!0&&(_.onMousemove=()=>{a.value===!0&&he(P)})),{index:P,opt:o,html:ne.value(o),label:Q.value(o),selected:_.active,focused:_.focused,toggleOption:fe,setOptionIndex:he,itemProps:_}})}),pe=v(()=>e.dropdownIcon!==void 0?e.dropdownIcon:A.iconSet.arrow.dropdown),Re=v(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),xe=v(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Y=v(()=>We(e.optionValue,"value")),Q=v(()=>We(e.optionLabel,"label")),Se=v(()=>We(e.optionDisable,"disable")),Me=v(()=>n.value.map(Y.value)),qt=v(()=>{const t={onInput:ot,onChange:ie,onKeydown:lt,onKeyup:et,onKeypress:tt,onFocus:Ze,onClick(u){z===!0&&Ce(u)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ie,t});ae(n,t=>{k=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&l.innerLoading.value!==!0&&(I.value!==!0&&a.value!==!0||x.value!==!0)&&(B!==!0&&we(),(I.value===!0||a.value===!0)&&ge(""))},{immediate:!0}),ae(()=>e.fillInput,we),ae(a,je),ae(j,Lt);function Ye(t){return e.emitValue===!0?Y.value(t):t}function De(t){if(t!==-1&&t<n.value.length)if(e.multiple===!0){const u=e.modelValue.slice();i("remove",{index:t,value:u.splice(t,1)[0]}),i("update:modelValue",u)}else i("update:modelValue",null)}function At(t){De(t),l.focus()}function Ge(t,u){const o=Ye(t);if(e.multiple!==!0){e.fillInput===!0&&qe(Q.value(t),!0,!0),i("update:modelValue",o);return}if(n.value.length===0){i("add",{index:0,value:o}),i("update:modelValue",e.multiple===!0?[o]:o);return}if(u===!0&&Le(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const h=e.modelValue.slice();i("add",{index:h.length,value:o}),h.push(o),i("update:modelValue",h)}function fe(t,u){if(l.editable.value!==!0||t===void 0||Se.value(t)===!0)return;const o=Y.value(t);if(e.multiple!==!0){u!==!0&&(qe(e.fillInput===!0?Q.value(t):"",!0,!0),ve()),H.value?.focus(),(n.value.length===0||Ae(Y.value(n.value[0]),o)!==!0)&&i("update:modelValue",e.emitValue===!0?o:t);return}if((z!==!0||O.value===!0)&&l.focus(),Ze(),n.value.length===0){const q=e.emitValue===!0?o:t;i("add",{index:0,value:q}),i("update:modelValue",e.multiple===!0?[q]:q);return}const h=e.modelValue.slice(),T=Me.value.findIndex(q=>Ae(q,o));if(T!==-1)i("remove",{index:T,value:h.splice(T,1)[0]});else{if(e.maxValues!==void 0&&h.length>=e.maxValues)return;const q=e.emitValue===!0?o:t;i("add",{index:h.length,value:q}),h.push(q)}i("update:modelValue",h)}function he(t){if(A.platform.is.desktop!==!0)return;const u=t!==-1&&t<j.value?t:-1;d.value!==u&&(d.value=u)}function _e(t=1,u){if(a.value===!0){let o=d.value;do o=ht(o+t,-1,j.value-1);while(o!==-1&&o!==d.value&&Se.value(e.options[o])===!0);d.value!==o&&(he(o),te(o),u!==!0&&e.useInput===!0&&e.fillInput===!0&&Ee(o>=0?Q.value(e.options[o]):D,!0))}}function Ot(t,u){const o=h=>Ae(Y.value(h),t);return e.options.find(o)||u.find(o)||t}function Le(t){const u=Y.value(t);return Me.value.find(o=>Ae(o,u))!==void 0}function Ze(t){e.useInput===!0&&H.value!==null&&(t===void 0||H.value===t.target&&t.target.value===g.value)&&H.value.select()}function Je(t){al(t,27)===!0&&a.value===!0&&(Ce(t),ve(),we()),i("keyup",t)}function et(t){const{value:u}=t.target;if(t.keyCode!==void 0){Je(t);return}if(t.target.value="",C!==null&&(clearTimeout(C),C=null),V!==null&&(clearTimeout(V),V=null),we(),typeof u=="string"&&u.length!==0){const o=u.toLocaleLowerCase(),h=q=>{const P=e.options.find(_=>String(q.value(_)).toLocaleLowerCase()===o);return P===void 0?!1:(n.value.indexOf(P)===-1?fe(P):ve(),!0)},T=q=>{h(Y)!==!0&&q!==!0&&h(Q)!==!0&&ge(u,!0,()=>T(!0))};T()}else l.clearValue(t)}function tt(t){i("keypress",t)}function lt(t){if(i("keydown",t),nl(t)===!0)return;const u=S.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),o=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(d.value!==-1||u===!0);if(t.keyCode===27){$e(t);return}if(t.keyCode===9&&o===!1){ye();return}if(t.target===void 0||t.target.id!==l.targetUid.value||l.editable.value!==!0)return;if(t.keyCode===40&&l.innerLoading.value!==!0&&a.value===!1){oe(t),be();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&S.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?De(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&i("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof S.value!="string"||S.value.length===0)&&(oe(t),d.value=-1,_e(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&J.value!==void 0&&(oe(t),d.value=Math.max(-1,Math.min(j.value,d.value+(t.keyCode===33?-1:1)*J.value.view)),_e(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(oe(t),_e(t.keyCode===38?-1:1,e.multiple));const h=j.value;if((L===void 0||M<Date.now())&&(L=""),h>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||L.length!==0)){a.value!==!0&&be(t);const T=t.key.toLocaleLowerCase(),q=L.length===1&&L[0]===T;M=Date.now()+1500,q===!1&&(oe(t),L+=T);const P=new RegExp("^"+L.split("").map(Ne=>Bl.indexOf(Ne)!==-1?"\\"+Ne:Ne).join(".*"),"i");let _=d.value;if(q===!0||_<0||P.test(Q.value(e.options[_]))!==!0)do _=ht(_+1,-1,h-1);while(_!==d.value&&(Se.value(e.options[_])===!0||P.test(Q.value(e.options[_]))!==!0));d.value!==_&&ue(()=>{he(_),te(_),_>=0&&e.useInput===!0&&e.fillInput===!0&&Ee(Q.value(e.options[_]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||L!=="")&&(t.keyCode!==9||o===!1))){if(t.keyCode!==9&&oe(t),d.value!==-1&&d.value<h){fe(e.options[d.value]);return}if(u===!0){const T=(q,P)=>{if(P){if(wt(P)!==!0)return}else P=e.newValueMode;if(qe("",e.multiple!==!0,!0),q==null)return;(P==="toggle"?fe:Ge)(q,P==="add-unique"),e.multiple!==!0&&(H.value?.focus(),ve())};if(e.onNewValue!==void 0?i("newValue",S.value,T):T(S.value),e.multiple!==!0)return}a.value===!0?ye():l.innerLoading.value!==!0&&be()}}function nt(){return z===!0?Z.value:$.value!==null&&$.value.contentEl!==null?$.value.contentEl:void 0}function Tt(){return nt()}function zt(){return e.hideSelected===!0?[]:s["selected-item"]!==void 0?de.value.map(t=>s["selected-item"](t)).slice():s.selected!==void 0?[].concat(s.selected()):e.useChips===!0?de.value.map((t,u)=>y(Ml,{key:"option-"+u,removable:l.editable.value===!0&&Se.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:ee.value,onRemove(){t.removeAtIndex(u)}},()=>y("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:Q.value(t.opt)}))):[y("span",{class:"ellipsis",[Te.value===!0?"innerHTML":"textContent"]:K.value})]}function ut(){if(F.value===!0)return s["no-option"]!==void 0?s["no-option"]({inputValue:S.value}):void 0;const t=s.option!==void 0?s.option:o=>y(sl,{key:o.index,...o.itemProps},()=>y(rl,()=>y(kl,()=>y("span",{[o.html===!0?"innerHTML":"textContent"]:o.label}))));let u=ke("div",Ie.value.map(t));return s["before-options"]!==void 0&&(u=s["before-options"]().concat(u)),cl(s["after-options"],u)}function It(t,u){const o=u===!0?{...ze.value,...l.splitAttrs.attributes.value}:void 0,h={ref:u===!0?H:void 0,key:"i_t",class:b.value,style:e.inputStyle,value:S.value!==void 0?S.value:"",type:"search",...o,id:u===!0?l.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...qt.value};return t!==!0&&z===!0&&(Array.isArray(h.class)===!0?h.class=[...h.class,"no-pointer-events"]:h.class+=" no-pointer-events"),y("input",h)}function ot(t){C!==null&&(clearTimeout(C),C=null),V!==null&&(clearTimeout(V),V=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ee(t.target.value||""),B=!0,D=S.value,l.focused.value!==!0&&(z!==!0||O.value===!0)&&l.focus(),e.onFilter!==void 0&&(C=setTimeout(()=>{C=null,ge(S.value)},e.inputDebounce)))}function Ee(t,u){S.value!==t&&(S.value=t,u===!0||e.inputDebounce===0||e.inputDebounce==="0"?i("inputValue",t):V=setTimeout(()=>{V=null,i("inputValue",t)},e.inputDebounce))}function qe(t,u,o){B=o!==!0,e.useInput===!0&&(Ee(t,!0),(u===!0||o!==!0)&&(D=t),u!==!0&&ge(t))}function ge(t,u,o){if(e.onFilter===void 0||u!==!0&&l.focused.value!==!0)return;l.innerLoading.value===!0?i("filterAbort"):(l.innerLoading.value=!0,c.value=!0),t!==""&&e.multiple!==!0&&n.value.length!==0&&B!==!0&&t===Q.value(n.value[0])&&(t="");const h=setTimeout(()=>{a.value===!0&&(a.value=!1)},10);f!==null&&clearTimeout(f),f=h,i("filter",t,(T,q)=>{(u===!0||l.focused.value===!0)&&f===h&&(clearTimeout(f),typeof T=="function"&&T(),c.value=!1,ue(()=>{l.innerLoading.value=!1,l.editable.value===!0&&(u===!0?a.value===!0&&ve():a.value===!0?je(!0):a.value=!0),typeof q=="function"&&ue(()=>{q(m)}),typeof o=="function"&&ue(()=>{o(m)})}))},()=>{l.focused.value===!0&&f===h&&(clearTimeout(f),l.innerLoading.value=!1,c.value=!1),a.value===!0&&(a.value=!1)})}function Mt(){return y(Vl,{ref:$,class:w.value,style:e.popupContentStyle,modelValue:a.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&F.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:p.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Re.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ce.value,onScrollPassive:se,onBeforeShow:it,onBeforeHide:_t,onShow:Et},ut)}function _t(t){rt(t),ye()}function Et(){le()}function Ft(t){Ce(t),H.value?.focus(),O.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Bt(t){Ce(t),ue(()=>{O.value=!1})}function Ht(){const t=[y(zl,{class:`col-auto ${l.fieldClass.value}`,...r.value,for:l.targetUid.value,dark:p.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:S.value.length!==0,...l.splitAttrs.listeners.value,onFocus:Ft,onBlur:Bt},{...s,rawControl:()=>l.getControl(!0),before:void 0,after:void 0})];return a.value===!0&&t.push(y("div",{ref:Z,class:w.value+" scroll",style:e.popupContentStyle,...ce.value,onClick:$e,onScrollPassive:se},ut())),y(il,{ref:G,modelValue:I.value,position:e.useInput===!0?"top":void 0,transitionShow:W,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:it,onBeforeHide:Pt,onHide:Rt,onShow:Dt},()=>y("div",{class:"q-select__dialog"+(p.value===!0?" q-select__dialog--dark q-dark":"")+(O.value===!0?" q-select__dialog--focused":"")},t))}function Pt(t){rt(t),G.value!==null&&G.value.__updateRefocusTarget(l.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),l.focused.value=!1}function Rt(t){ve(),l.focused.value===!1&&i("blur",t),we()}function Dt(){const t=document.activeElement;(t===null||t.id!==l.targetUid.value)&&H.value!==null&&H.value!==t&&H.value.focus(),le()}function ye(){I.value!==!0&&(d.value=-1,a.value===!0&&(a.value=!1),l.focused.value===!1&&(f!==null&&(clearTimeout(f),f=null),l.innerLoading.value===!0&&(i("filterAbort"),l.innerLoading.value=!1,c.value=!1)))}function be(t){l.editable.value===!0&&(z===!0?(l.onControlFocusin(t),I.value=!0,ue(()=>{l.focus()})):l.focus(),e.onFilter!==void 0?ge(S.value):(F.value!==!0||s["no-option"]!==void 0)&&(a.value=!0))}function ve(){I.value=!1,ye()}function we(){e.useInput===!0&&qe(e.multiple!==!0&&e.fillInput===!0&&n.value.length!==0&&Q.value(n.value[0])||"",!0,!0)}function je(t){let u=-1;if(t===!0){if(n.value.length!==0){const o=Y.value(n.value[0]);u=e.options.findIndex(h=>Ae(Y.value(h),o))}R(u)}he(u)}function Lt(t,u){a.value===!0&&l.innerLoading.value===!1&&(R(-1,!0),ue(()=>{a.value===!0&&l.innerLoading.value===!1&&(t>u?R():je(!0))}))}function at(){I.value===!1&&$.value!==null&&$.value.updatePosition()}function it(t){t!==void 0&&Ce(t),i("popupShow",t),l.hasPopupOpen=!0,l.onControlFocusin(t)}function rt(t){t!==void 0&&Ce(t),i("popupHide",t),l.hasPopupOpen=!1,l.onControlFocusout(t)}function st(){z=A.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?s["no-option"]!==void 0||e.onFilter!==void 0||F.value===!1:!0),W=A.platform.is.ios===!0&&z===!0&&e.useInput===!0?"fade":e.transitionShow}return ul(st),ol(at),st(),Be(()=>{C!==null&&clearTimeout(C),V!==null&&clearTimeout(V)}),Object.assign(m,{showPopup:be,hidePopup:ve,removeAtIndex:De,add:Ge,toggleOption:fe,getOptionIndex:()=>d.value,setOptionIndex:he,moveOptionSelection:_e,filter:ge,updateMenuPosition:at,updateInputValue:qe,isOptionSelected:Le,getEmittingOptionValue:Ye,isOptionDisabled:(...t)=>Se.value.apply(null,t)===!0,getOptionValue:(...t)=>Y.value.apply(null,t),getOptionLabel:(...t)=>Q.value.apply(null,t)}),Object.assign(l,{innerValue:n,fieldClass:v(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:N,targetRef:H,hasValue:x,showPopup:be,floatingLabel:v(()=>e.hideSelected!==!0&&x.value===!0||typeof S.value=="number"||S.value.length!==0||ct(e.displayValue)),getControlChild:()=>{if(l.editable.value!==!1&&(I.value===!0||F.value!==!0||s["no-option"]!==void 0))return z===!0?Ht():Mt();l.hasPopupOpen===!0&&(l.hasPopupOpen=!1)},controlEvents:{onFocusin(t){l.onControlFocusin(t)},onFocusout(t){l.onControlFocusout(t,()=>{we(),ye()})},onClick(t){if($e(t),z!==!0&&a.value===!0){ye(),H.value?.focus();return}be(t)}},getControl:t=>{const u=zt(),o=t===!0||I.value!==!0||z!==!0;if(e.useInput===!0)u.push(It(t,o));else if(l.editable.value===!0){const T=o===!0?ze.value:void 0;u.push(y("input",{ref:o===!0?H:void 0,key:"d_t",class:"q-select__focus-target",id:o===!0?l.targetUid.value:void 0,value:K.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...T,onKeydown:lt,onKeyup:Je,onKeypress:tt})),o===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&u.push(y("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:et}))}if(X.value!==void 0&&e.disable!==!0&&Me.value.length!==0){const T=Me.value.map(q=>y("option",{value:q,selected:!0}));u.push(y("select",{class:"hidden",name:X.value,multiple:e.multiple},T))}const h=e.useInput===!0||o!==!0?void 0:l.splitAttrs.attributes.value;return y("div",{class:"q-field__native row items-center",...h,...l.splitAttrs.listeners.value},u)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[y(Fe,{class:"q-select__dropdown-icon"+(a.value===!0?" rotate-180":""),name:pe.value})]:null}),Vt(l)}}),Kl=He({name:"QTooltip",inheritAttrs:!1,props:{...xl,...vl,...Ke,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Ke.transitionShow,default:"jump-down"},transitionHide:{...Ke.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:vt},self:{type:String,default:"top middle",validator:vt},offset:{type:Array,default:()=>[14,14],validator:pl},scrollTarget:fl,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...dl],setup(e,{slots:s,emit:i,attrs:m}){let A,a;const I=Pe(),{proxy:{$q:d}}=I,S=E(null),O=E(!1),c=v(()=>mt(e.anchor,d.lang.rtl)),C=v(()=>mt(e.self,d.lang.rtl)),V=v(()=>e.persistent!==!0),{registerTick:k,removeTick:z}=ml(),{registerTimeout:B}=Sl(),{transitionProps:f,transitionStyle:D}=hl(e),{localScrollTarget:W,changeScrollEvent:L,unconfigureScrollTarget:M}=ql(e,le),{anchorEl:N,canShow:H,anchorEvents:$}=Al({showing:O,configureAnchorEl:te}),{show:G,hide:Z}=gl({showing:O,canShow:H,handleShow:re,handleHide:me,hideOnRouteChange:V,processOnMount:!0});Object.assign($,{delayShow:ke,delayHide:se});const{showPortal:X,hidePortal:ie,renderPortal:j}=yl(I,S,n,"tooltip");if(d.platform.is.mobile===!0){const r={anchorEl:N,innerRef:S,onClickOutside(x){return Z(x),x.target.classList.contains("q-dialog__backdrop")&&oe(x),!0}},p=v(()=>e.modelValue===null&&e.persistent!==!0&&O.value===!0);ae(p,x=>{(x===!0?Ol:St)(r)}),Be(()=>{St(r)})}function re(r){X(),k(()=>{a=new MutationObserver(()=>R()),a.observe(S.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),R(),le()}),A===void 0&&(A=ae(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,R)),B(()=>{X(!0),i("show",r)},e.transitionDuration)}function me(r){z(),ie(),J(),B(()=>{ie(!0),i("hide",r)},e.transitionDuration)}function J(){a!==void 0&&(a.disconnect(),a=void 0),A!==void 0&&(A(),A=void 0),M(),dt($,"tooltipTemp")}function R(){Tl({targetEl:S.value,offset:e.offset,anchorEl:N.value,anchorOrigin:c.value,selfOrigin:C.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ke(r){if(d.platform.is.mobile===!0){gt(),document.body.classList.add("non-selectable");const p=N.value,x=["touchmove","touchcancel","touchend","click"].map(b=>[p,b,"delayHide","passiveCapture"]);ft($,"tooltipTemp",x)}B(()=>{G(r)},e.delay)}function se(r){d.platform.is.mobile===!0&&(dt($,"tooltipTemp"),gt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),B(()=>{Z(r)},e.hideDelay)}function te(){if(e.noParentEvent===!0||N.value===null)return;const r=d.platform.is.mobile===!0?[[N.value,"touchstart","delayShow","passive"]]:[[N.value,"mouseenter","delayShow","passive"],[N.value,"mouseleave","delayHide","passive"]];ft($,"anchor",r)}function le(){if(N.value!==null||e.scrollTarget!==void 0){W.value=bl(N.value,e.scrollTarget);const r=e.noParentEvent===!0?R:Z;L(W.value,r)}}function l(){return O.value===!0?y("div",{...m,ref:S,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",m.class],style:[m.style,D.value],role:"tooltip"},Cl(s.default)):null}function n(){return y(wl,f.value,l)}return Be(J),Object.assign(I.proxy,{updatePosition:R}),j}});export{Kl as Q,Fl as a,$l as b,Nl as c,bt as u};
