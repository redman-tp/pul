import{_,G as y,N as P,I as d,L as s,J as a,K as h,t as u,T as m,H as c,S as g,aC as x,B as f,W as b,a7 as C,r as V}from"./index-B0iSiuEa.js";import{Q as v}from"./QTooltip-CiG7XDpu.js";import{T as B,Q as T,e as N}from"./TPagination-gtQN2vqc.js";import{u as Q}from"./use-meta-BaTCs18N.js";import"./QMenu-DeCSquD-.js";import"./selection-NvJEFU-3.js";import"./rtl-DFPa-2ov.js";import"./format-hlGAdIUH.js";import"./QList-B86bEfPj.js";import"./use-fullscreen-tRaayeB4.js";const R=[{name:"id",required:!0,label:"ID",align:"left",field:"id",sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"company",required:!0,label:"Company",align:"left",field:"company",sortable:!0},{name:"email",required:!0,label:"Email",align:"left",field:"email",sortable:!0},{name:"paid",required:!0,label:"Paid",align:"left",field:"paid",sortable:!0},{name:"date",required:!0,label:"Date",align:"left",field:"date",sortable:!0},{name:"selected_space",required:!0,label:"Selected space",align:"left",field:"selected_space",sortable:!0}];function w(l,i){let t=i!==void 0?i(l):l;return t=t==null?"":String(t),t=t.split('"').join('""'),`"${t}"`}const F={setup(){Q({title:"Reservations"})},components:{TPagination:B},data(){const l=V({sortBy:"desc",descending:!1,page:1,rowsPerPage:8});return{columns:R,selected:[],category:null,categories:[],rows:[],errors:[],image:null,data:{},pagination:l,filter:"",curl:"",separator:"",mode:"list",role:"fruitbay",items:[],meta:{},links:{},currentPage:1,loading:!1,editstate:!1,editReserve:!1,editLoad:!1,reserveid:"",spaceid:"",initialPagination:{rowsPerPage:30,pagesNumber:1},loaders:{delete:!1,category:!1,deleteBtn:[],save:[]}}},computed:{pagesNumber(){return Math.ceil(this.rows.length/this.pagination.rowsPerPage)}},mounted(){this.onRequest({pagination:this.pagination,filter:void 0})},methods:{onRequest(l){this.loading=!0;const i="admin/spaces/reservations/paid";this.curl=i,this.$api.get(i).then(t=>{console.log(t),this.loading=!1,this.rows=t.data.data,this.items=t.data.data,this.links=t.data.links,this.meta=t.data.meta}).catch(({response:t})=>{console.log(t),this.loading=!1,this.rows=[]})},refreshPage(){this.curl!==""&&(this.loading=!0,this.$api.get(this.curl).then(({data:l})=>{this.loading=!1,this.items=l.data,console.log(l)}).catch(({response:l})=>{console.log(l),this.loading=!1,this.rows=[]}))},exportTable(){const l=[this.columns.map(t=>w(t.label))].concat(this.rows.map(t=>this.columns.map(o=>w(typeof o.field=="function"?o.field(t):t[o.field===void 0?o.name:o.field],o.format)).join(","))).join(`\r
`);N("fruitbay-management.csv",l,"text/csv")!==!0&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}},S={class:"q-pt-xl"},I={class:"full-width row flex-center text-negative q-gutter-sm"};function L(l,i,t,o,e,p){const k=y("t-pagination");return d(),P("div",S,[s(T,{title:"Spaces",class:"q-pt-xl",rows:e.items,"hide-header":e.mode==="grid",columns:e.columns,"row-key":"id",grid:e.mode=="grid",filter:e.filter,loading:e.loading,selection:"multiple",selected:e.selected,"onUpdate:selected":i[2]||(i[2]=n=>e.selected=n),pagination:e.initialPagination,onRequest:p.onRequest},{"top-right":a(n=>[s(x,{outlined:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":i[0]||(i[0]=r=>e.filter=r),placeholder:"Search"},{append:a(()=>[s(u,{name:"search"})]),_:1},8,["modelValue"]),e.mode==="list"?(d(),c(f,{key:0,flat:"",round:"",dense:"",icon:n.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n.toggleFullscreen},{default:a(()=>[s(v,{disable:l.$q.platform.is.mobile},{default:a(()=>[b(m(n.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])]),_:2},1032,["icon","onClick"])):g("",!0),n.inFullscreen?g("",!0):(d(),c(f,{key:1,flat:"",round:"",dense:"",icon:e.mode==="grid"?"list":"grid_on",onClick:i[1]||(i[1]=r=>{e.mode=e.mode==="grid"?"list":"grid",e.separator=e.mode==="grid"?"none":"horizontal"})},{default:a(()=>[s(v,{disable:l.$q.platform.is.mobile},{default:a(()=>[b(m(e.mode==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])]),_:1},8,["icon"])),e.rows.length?(d(),c(f,{key:2,color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",padding:"xs",onClick:p.exportTable},null,8,["onClick"])):g("",!0)]),"no-data":a(({icon:n,message:r,filter:q})=>[h("div",I,[s(u,{size:"2em",name:"sentiment_dissatisfied"}),h("span",null," Well this is sad... "+m(r),1),s(u,{size:"2em",name:q?"filter_b_and_w":n},null,8,["name"])])]),_:1},8,["rows","hide-header","columns","grid","filter","loading","selected","pagination","onRequest"]),s(C,{align:"center"},{default:a(()=>[s(k,{links:e.links,meta:e.meta,container:"#contentContainer",modelValue:e.currentPage,"onUpdate:modelValue":i[3]||(i[3]=n=>e.currentPage=n),onLoading:i[4]||(i[4]=n=>l.loadingMore=!0),onLoaded:i[5]||(i[5]=n=>(e.items=n,l.loadingMore=!1))},null,8,["links","meta","modelValue"])]),_:1})])}const J=_(F,[["render",L],["__scopeId","data-v-6740325b"]]);export{J as default};
